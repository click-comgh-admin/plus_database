{"version":3,"file":"../../production_public/assets/v2/dev-files/js/membership/connections/rejected.js","mappings":"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","sources":["webpack://webpackNumbers/webpack/universalModuleDefinition","webpack://webpackNumbers/./src/view/membership/connections/list-rejected.ts","webpack://webpackNumbers/./src/view/membership/connections/unassigned_and_rejected/view_rejected.ts"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"webpackNumbers\"] = factory();\n\telse\n\t\troot[\"webpackNumbers\"] = factory();\n})(self, () => {\nreturn ","import { LitElement, html, css } from 'lit';\r\nimport { customElement, property, } from 'lit/decorators.js'\r\nimport './members_and_connections/view_connections';\r\nimport '@@views/no_access/account_expired';\r\nimport '@@views/no_access/no_page_entry';\r\nimport { AppSetup } from '@@addons/functions/app_settings';\r\nimport { getAppSettingsExtraSettings } from '@@addons/functions/app_settings/extra_settings';\r\nimport { AppSettingsExtraUserAccess } from '@@addons/functions/app_settings/extra_settings/user_access';\r\nimport { PAGE__IDS } from './page__id';\r\nimport './unassigned_and_rejected/view_rejected';\r\n\r\n\r\n@customElement(\"pdb-connections-rejected-connections\")\r\nexport class PdbConnectionsRejectedConnections extends LitElement {\r\n  constructor() { super(); }\r\n\r\n  @property({ type: Boolean })\r\n  private _hasSetup: boolean = false;\r\n\r\n  connectedCallback() {\r\n    super.connectedCallback();\r\n    AppSetup().then(() => this._hasSetup = true);\r\n  }\r\n\r\n  disconnectedCallback() { }\r\n  static styles = [\r\n    css`\r\n   :host { display: block; }\r\n  `\r\n  ];\r\n\r\n  render() {\r\n    if (this._hasSetup) {\r\n      if (getAppSettingsExtraSettings()?.expiration_date.expired) {\r\n        return html`<account-expired-component></account-expired-component>`;\r\n      }\r\n      if (!AppSettingsExtraUserAccess({pageId: PAGE__IDS.user_connections, viewType: \"View\"}, false)) {\r\n        return html`<no-page-entry-component></no-page-entry-component>`;\r\n      }\r\n    }\r\n\r\n    return html`\r\n      <div class=\"flex flex-col shadow bg-white my-2 p-2\">\r\n        <pdb-connections-rejected-view class=\"my-1\"></pdb-connections-rejected-view>\r\n      </div>\r\n    `;\r\n  }\r\n\r\n  firstUpdated() { }\r\n\r\n  createRenderRoot() {\r\n    return this;\r\n  }\r\n}\r\n","import { LitElement, html, css, TemplateResult } from 'lit';\r\nimport { customElement, property, } from 'lit/decorators.js';\r\nimport \"@material/mwc-icon\";\r\nimport \"@material/mwc-icon-button\";\r\nimport \"../../../../assets/styles/views/home/dashboard.scss\";\r\nimport { DELETE_UserConnectionAccount } from '@@addons/network/members/connections/accounts/delete';\r\nimport { UserConnectionAccount_I } from '@@addons/interfaces/members/connections/accounts';\r\nimport { CONSTANTS } from '@@addons/constants';\r\nimport { getUserLoginInfoCookie } from '@@addons/functions/login';\r\nimport { urlQueryParams, urlQueryParamsJoin } from '@@addons/functions/url_query_params';\r\nimport '@@widgets/datatables';\r\nimport '@@interfaces/datatables';\r\nimport \"@material/mwc-select\";\r\nimport '@@addons/widgets/form/new/select';\r\nimport { MembershipUser_I, MembershipUser_S } from '@@addons/interfaces/members/user';\r\nimport { GET_MembershipUsers } from '@@addons/network/members/membership/users';\r\n\r\n\r\n@customElement(\"pdb-connections-rejected-view\")\r\nexport class PdbConnectionsRejectedView extends LitElement {\r\n  constructor() { super(); }\r\n\r\n  @property({ type: Array })\r\n  private _connection_accounts: UserConnectionAccount_I[] = [];\r\n\r\n  @property({ type: String })\r\n  private datatablePathUrl: string = \"members/user-connection-account/rejected\";\r\n\r\n  async connectedCallback() {\r\n    super.connectedCallback();\r\n\r\n  }\r\n\r\n  disconnectedCallback() { }\r\n  static styles = [\r\n    css`\r\n   :host { display: block; }\r\n  `\r\n  ];\r\n\r\n  render() {\r\n\r\n    if (this._connection_accounts === null) {\r\n      return html`\r\n        <div class=\"main-container\">\r\n          <div class=\"flex justify-center\">\r\n            <mwc-circular-progress indeterminate></mwc-circular-progress>\r\n          </div>\r\n        </div>\r\n      `;\r\n    }\r\n    if (this._connection_accounts === undefined) {\r\n      return html`\r\n        <div class=\"main-container\">\r\n          <div class=\"flex justify-center\">\r\n            <h4 class=\"text-red-600 text-lg\">\r\n              <span class=\"font-bold\">Schedule </span>: undefined error</h4>\r\n          </div>\r\n        </div>\r\n      `;\r\n    }\r\n\r\n    return html`\r\n      <span class=\"flex flex-row md:flex-col w-100\"></span>\r\n      <div class=\"block my-1 overflow-x-scroll\">\r\n        <hr class=\"my-2\" />\r\n        ${this.table}\r\n      </div>\r\n    `;\r\n  }\r\n\r\n  firstUpdated() {\r\n\r\n  }\r\n\r\n  private get __tableHeaders(): DataTables_ColumnSettings_I[] {\r\n    return [\r\n      { title: 'Connection', },\r\n      { title: 'Action', },\r\n    ];\r\n  }\r\n\r\n  private get __tableBody(): DataTables_ColumnSettings_I[][] {\r\n    return [];\r\n  }\r\n\r\n  private get __tableFoot(): DataTables_ColumnSettings_I[] {\r\n    return [\r\n      { title: 'Connection', },\r\n      { title: 'Action', },\r\n    ];\r\n  }\r\n\r\n  private get table(): TemplateResult {\r\n    let URL = CONSTANTS.URLS.AKWAABA_API_BASE_URL + \"\" + this.datatablePathUrl + \"?datatable_plugin\";\r\n\r\n    const _urlQueryString = this.urlQueryString;\r\n    // console.log({_urlQueryString});\r\n    URL = URL + _urlQueryString;\r\n    // console.log({URL});\r\n\r\n    const __dataTable = this.__dataTable(URL);\r\n    let ajaxHeader: { Authorization?: string } = {};\r\n    const _get_cookie = getUserLoginInfoCookie();\r\n    ajaxHeader.Authorization = \"Token \" + _get_cookie.token;\r\n    return html`\r\n      <datatables-new .datatable=\"${__dataTable}\" .ajaxHeader=\"${ajaxHeader}\" .dt_body=\"${this.__tableBody}\"\r\n        .dt_foot=\"${this.__tableFoot}\" .dt_head=\"${this.__tableHeaders}\"></datatables-new>\r\n    `;\r\n  }\r\n\r\n  private renderMemberInfo(data: any, type: any, connectionInfo: UserConnectionAccount_I) {\r\n    // console.log({connectionInfo});\r\n    const memberId = connectionInfo.memberId;\r\n    const connectionId = connectionInfo.connectionId;\r\n    return `\r\n      <div class=\"flex flex-col\">\r\n        <div class=\"flex flex-col lg:flex-row m-1 justify-start\">\r\n          <div class=\"flex\">\r\n            <h6 class=\"whitespace-nowrap text-sm font-bold mr-1\">Connection Name</h6>\r\n            <p class=\"whitespace-nowrap text-sm ml-1\">${connectionId.firstname} ${connectionId.middlename}\r\n              ${connectionId.surname}</p>\r\n          </div>\r\n          <div class=\"m-1\"><mwc-icon>directions<mwc-icon/></div>\r\n          <div class=\"flex\">\r\n            <h6 class=\"whitespace-nowrap text-sm font-bold mr-1\">Member Name</h6>\r\n            <p class=\"whitespace-nowrap text-sm ml-1\">${memberId.firstname} ${memberId.middlename} ${memberId.surname}</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    `;\r\n  }\r\n\r\n  private renderClockInInfo(data: any, type: any, connectionInfo: UserConnectionAccount_I) {\r\n    // console.log({connectionInfo});\r\n    const connectionType = connectionInfo.type;\r\n    return `\r\n      <div class=\"justify-center content-center\">\r\n        <mwc-icon-button class=\"ml-1 danger\" icon=\"delete_forever\" \r\n          delete-this-item=\"${connectionInfo.id}\" >\r\n        </mwc-icon-button>\r\n        <div class=\"flex flex-col\">\r\n          <h6 class=\"whitespace-nowrap text-sm font-bold mr-1\">Connection Type:</h6>\r\n          <div class=\"flex flex-col\">\r\n            <p class=\"whitespace-nowrap text-sm ml-1\">${connectionType.type}</p>\r\n            <p class=\"text-xs ml-1 whitespace-pre-wrap\">${connectionType.description}</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    `;\r\n  }\r\n\r\n  private get urlQueryString() {\r\n    const _urlQueryParams = urlQueryParams(),\r\n      filterNameId_filter_memberId = \"memberId\";\r\n\r\n    let newObject: any = {};\r\n\r\n    for (const key in _urlQueryParams) {\r\n      let value = String(_urlQueryParams[key]);\r\n      if ((key === filterNameId_filter_memberId)) {\r\n        // console.log({value, });\r\n\r\n        newObject[key] = value;\r\n      }\r\n    }\r\n\r\n    let _urlQueryParamsJoin = urlQueryParamsJoin(newObject);\r\n\r\n    return (_urlQueryParamsJoin.length === 0)\r\n      ? _urlQueryParamsJoin : \"&\" + _urlQueryParamsJoin;\r\n  }\r\n\r\n  private __dataTable(url: string): DataTables_Settings_I {\r\n    const __this = this;\r\n\r\n    // console.log({ \"__this\": __this, url });\r\n\r\n    let dataTable: DataTables_Settings_I = {\r\n      'order': [[0, 'desc']],\r\n      'processing': true,\r\n      'serverSide': true,\r\n      'ajax': {\r\n        url: url,\r\n        dataSrc: 'data',\r\n        apiType: \"akwaabaApp\",\r\n      },\r\n      \"columns\": [\r\n        {\r\n          data: 'id',\r\n          render: (data: any, type: any, connectionInfo: UserConnectionAccount_I) => __this.renderMemberInfo(data, type, connectionInfo),\r\n          orderable: true\r\n        },\r\n        {\r\n          data: 'inTime',\r\n          render: (data: any, type: any, connectionInfo: UserConnectionAccount_I) => __this.renderClockInInfo(data, type, connectionInfo),\r\n          orderable: true\r\n        },\r\n\r\n      ],\r\n      'columnDefs': [\r\n        {\r\n          targets: ['_all'],\r\n          className: 'mdc-data-table__cell',\r\n          // @ts-ignore\r\n          checkboxes: {\r\n            selectRow: true\r\n          },\r\n        }\r\n      ],\r\n      'lengthMenu': [10, 25, 50, 100, 500, 1000],\r\n      \"drawCallback\": async function (e) {\r\n        const aoData = e.aoData;\r\n        // console.log({ aoData })\r\n        __this.deleteConnectionAction();\r\n      },\r\n      \"responsive\": false,\r\n      \"dom\": 'Blfrtip',\r\n      buttons: [\r\n        'selected',\r\n        'selectedSingle',\r\n        'selectAll',\r\n        'selectNone',\r\n        'selectRows',\r\n        'selectColumns',\r\n        'selectCells',\r\n        'pdf',\r\n        'excel',\r\n        'copy',\r\n        'csv',\r\n      ],\r\n      select: true,\r\n      // \"select\": {\r\n      //   \"style\": \"multi\"\r\n      // },\r\n    };\r\n    return dataTable;\r\n  }\r\n\r\n  private deleteConnectionAction() {\r\n    document.querySelectorAll('[delete-this-item]').forEach((btn) => {\r\n      // console.log({btn})\r\n      btn.addEventListener('click', (e) => {\r\n        // console.log({e})\r\n        // e.preventDefault();\r\n        this.deleteConnection(e);\r\n      })\r\n    });\r\n  }\r\n\r\n  async deleteConnection(e: Event) {\r\n    e.preventDefault();\r\n    // console.log({ e });\r\n\r\n    // @ts-ignore\r\n    const userConnectionId = Number(e.currentTarget.getAttribute('delete-this-item'));\r\n\r\n    await DELETE_UserConnectionAccount(userConnectionId);\r\n  }\r\n\r\n  public async getMember(ID: number) {\r\n    const _networkResponse = await GET_MembershipUsers<MembershipUser_I>(ID);\r\n    if (_networkResponse === null) {\r\n      return \"???\";\r\n    } else {\r\n      // console.log({\"_networkResponse.response\": _networkResponse.response});\r\n\r\n      if (_networkResponse.response.success && 'dateOfBirth' in _networkResponse.response.data) {\r\n        // console.log({ \"_networkResponse.response\": _networkResponse.response })\r\n\r\n        const member: MembershipUser_I = MembershipUser_S(_networkResponse.response.data);\r\n        return `${member.firstname} ${member.middlename} ${member.surname}`;\r\n      } else {\r\n        return _networkResponse.response.message;\r\n      }\r\n    }\r\n  }\r\n\r\n  createRenderRoot() {\r\n    return this;\r\n  }\r\n}\r\n"],"names":["root","factory","exports","module","define","amd","self","PdbConnectionsRejectedConnections","LitElement","constructor","super","_hasSetup","connectedCallback","AppSetup","then","this","disconnectedCallback","render","getAppSettingsExtraSettings","expiration_date","expired","html","AppSettingsExtraUserAccess","pageId","PAGE__IDS","viewType","firstUpdated","createRenderRoot","styles","css","property","type","Boolean","customElement","PdbConnectionsRejectedView","_connection_accounts","datatablePathUrl","undefined","table","__tableHeaders","title","__tableBody","__tableFoot","URL","CONSTANTS","urlQueryString","__dataTable","ajaxHeader","_get_cookie","getUserLoginInfoCookie","Authorization","token","renderMemberInfo","data","connectionInfo","memberId","connectionId","firstname","middlename","surname","renderClockInInfo","connectionType","id","description","_urlQueryParams","urlQueryParams","newObject","key","value","String","_urlQueryParamsJoin","urlQueryParamsJoin","length","url","__this","dataSrc","apiType","orderable","targets","className","checkboxes","selectRow","e","aoData","deleteConnectionAction","buttons","select","document","querySelectorAll","forEach","btn","addEventListener","deleteConnection","preventDefault","userConnectionId","Number","currentTarget","getAttribute","DELETE_UserConnectionAccount","getMember","ID","_networkResponse","GET_MembershipUsers","response","success","member","MembershipUser_S","message","Array"],"sourceRoot":""}