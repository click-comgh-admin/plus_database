"use strict";!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.webpackNumbers=t():e.webpackNumbers=t()}(self,(()=>(self.webpackChunkwebpackNumbers=self.webpackChunkwebpackNumbers||[]).push([["additional-registration/creator/form"],{17725:(e,t,n)=>{n.r(t),n.d(t,{getActiveBranchIdCookie:()=>d,removeActiveBranchIdCookie:()=>c,setActiveBranchIdCookie:()=>a});var s=n(67052),o=n(21942),r=n(61489);const i="pdb-active-branch",a=e=>{const t=JSON.stringify(e);(0,o.set_cookies)(i,"",-1),(0,o.set_cookies)(i,(0,s.base64Encode)(t),3500)};function c(){(0,o.set_cookies)(i,"",-1)}const d=()=>{if(""===(0,o.get_cookie)(i))return null;{const e=(0,s.base64Decode)((0,o.get_cookie)(i)),t=JSON.parse(e);return(0,r.clientBranchInfo_S)(t)}}},61489:(e,t,n)=>{function s(e){return{id:Number(e.id),name:String(e.name),accountId:Number(e.accountId),createdBy:Number(e.createdBy),creationDate:new Date(e.creationDate),updatedBy:Number(e.updatedBy),updateDate:new Date(e.updateDate)}}function o(e){return{id:Number(e.id),name:String(e.name),accountId:Number(e.accountId)}}n.r(t),n.d(t,{ClientBranch_S:()=>s,clientBranchInfo_S:()=>o})},39130:(e,t,n)=>{n.r(t),n.d(t,{POST_AdditionalRegistrationQuestion:()=>u});var s=n(86455),o=n.n(s),r=n(48485),i=n(87270),a=n(14492),c=n(33600),d=function(e,t,n,s){return new(n||(n=Promise))((function(o,r){function i(e){try{c(s.next(e))}catch(e){r(e)}}function a(e){try{c(s.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,a)}c((s=s.apply(e,t||[])).next())}))};function u(e){return d(this,void 0,void 0,(function*(){const t=(0,c.getUserLoginInfoCookie)();console.log({questionData:e});const n=r.CONSTANTS.URLS.AKWAABA_API_BASE_URL+"members/additonal-registration/questions/bulk",s=e;return o().fire({title:"Add Question(s)?",icon:"info",iconColor:"#f97817",showCancelButton:!0,confirmButtonText:"Yes",cancelButtonText:"Cancel",confirmButtonColor:"#f97817",cancelButtonColor:"#ddd",reverseButtons:!0,showLoaderOnConfirm:!0,backdrop:!0,preConfirm:e=>d(this,void 0,void 0,(function*(){return yield(0,i.http)(n,{method:"POST",body:JSON.stringify(s),headers:{Authorization:"Token "+t.token}},!0,!1).then((e=>{try{return new a.NetWorkCallResponses("post",e,!1)}catch(t){console.error({error:t});let n=e;n.error=t;const s=new a.NetWorkCallResponses("post",n,!0);return s.postForm,s}})).catch((e=>{o().showValidationMessage(`${String(e)}`)}))})),allowOutsideClick:()=>!o().isLoading()}).then((e=>{if(e.isConfirmed){let t="Success",n=!1;const s=e.value;if(s instanceof Object){const e=s.response;t=String(e.message),n=s.response.success}o().fire({title:t,icon:n?"success":"error",iconColor:"#f97817",confirmButtonColor:"#f97817"}),n&&setTimeout((()=>{window.location.reload()}),500)}}))}))}},18500:(e,t,n)=>{n.r(t),n.d(t,{AdditionalRegistrationCreatorForm:()=>b}),n(45501),n(69579),n(43683),n(74657);var s,o,r=n(85862),i=n(59662),a=(n(23283),n(16413),n(51511),n(16883),n(30367),n(44672)),c=(n(75866),n(91885),n(26224)),d=n(33600),u=n(17725),l=n(39130),p=n(90072),h=n(71714),y=function(e,t,n,s){var o,r=arguments.length,i=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,s);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r<3?o(i):r>3?o(t,n,i):o(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i},m=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},f=function(e,t,n,s){return new(n||(n=Promise))((function(o,r){function i(e){try{c(s.next(e))}catch(e){r(e)}}function a(e){try{c(s.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,a)}c((s=s.apply(e,t||[])).next())}))};let b=class extends r.LitElement{constructor(){super(),this.CLIENT_ID=0,this._data=[],this.urlQueryParams=void 0,this._userLoginInfo=null,this.selectedBranchId=0,this._branches=[],this._activeBranchId=null,this._memberCategories=[],this._arQuestionType=[]}connectedCallback(){const e=Object.create(null,{connectedCallback:{get:()=>super.connectedCallback}});return f(this,void 0,void 0,(function*(){e.connectedCallback.call(this);const t=(0,u.getActiveBranchIdCookie)();this._activeBranchId=null===t?null:[t],this._userLoginInfo=[(0,d.getUserLoginInfoCookie)()],this.urlQueryParams=(0,a.urlQueryParams)(),yield this.getBranches(),yield this.getMemberCategories(),yield this.getAdditionalRegistrationQuestionType()}))}disconnectedCallback(){}render(){return this.userBranch=0,null!==this._userLoginInfo&&this._userLoginInfo.length>0&&(this.userBranch=this._userLoginInfo[0].user.branchId),r.html`
      <div class="shadow bg-white p-2 my-2">
        ${this.form}
      </div>
    `}get form(){return r.html`
      <div class="form-container">
        <div class=" !px-0">
          <div class="-row !px-0">
            <div class="-col-md-12">
              <header class="header warning -col-md-12">
                <label for="" class="label">
                  <mwc-icon class="icon">format_strikethrough</mwc-icon>
                  <h1 class="h1 !text-red-400">New Additional Registration Question(s)</h1>
                  <h3 class="h3">Create New Additional Registration Question(s)!</h3>
                </label>
              </header>
              <form method="post" action="#" class="form mt-0" make-general-posts="add-schedule-member-day">
                <div class="p-0 m-0" show-dayField="all">
                  <question-multiple-inputs-component .branches="${this._branches}" .memberCategories="${this._memberCategories}" 
                    userBranch="${this.userBranch}" .arQuestionType="${this._arQuestionType}">
                  </question-multiple-inputs-component>
                </div>
                <div class="row justify-content-center">
                  <div class="col-md-12 col-lg-12">
                    <div class="form-input-container">
                      <mwc-button label="Add Additional Registration Question(s)" raised class="button" @click="${this.submitForm}">
                      </mwc-button>
                    </div>

                    <div class="flex form-input-container items-center text-center">
                      <hr class="border-gray-300 border-1 w-full rounded-md">
                      <label class="block font-medium text-sm text-gray-600 w-full">
                        Lets go digital...
                      </label>
                      <hr class="border-gray-300 border-1 w-full rounded-md">
                    </div>
                  </div>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>
    `}firstUpdated(){}submitForm(e){return f(this,void 0,void 0,(function*(){e.preventDefault(),document.querySelectorAll("question-multiple-inputs-component").forEach((e=>f(this,void 0,void 0,(function*(){console.log({"selector--selector":e});const t=e.multipleQuestionObjects[0].items;console.log({"selector--multipleQuestionObjects":t}),yield(0,l.POST_AdditionalRegistrationQuestion)(t)}))))}))}getBranches(){return f(this,void 0,void 0,(function*(){const e=yield(0,c.GET_ClientBranches)();let t=[];null===e?t.push({id:0,name:"**NOT FOUND**"}):!0===e.response.success&&"length"in e.response.data&&(t=e.response.data);const n=[];n.push(...this._branches,...t),this._branches=n}))}getMemberCategories(){return f(this,void 0,void 0,(function*(){const e=yield(0,p.GET_MemberGroupingsMemberCategories)();let t=[];null===e?t.push({id:0,category:"**NOT FOUND**"}):!0===e.response.success&&"length"in e.response.data&&(t=e.response.data);const n=[];n.push(...this._memberCategories,...t),this._memberCategories=n}))}getAdditionalRegistrationQuestionType(){return f(this,void 0,void 0,(function*(){const e=yield(0,h.GET_AdditionalRegistrationQuestionType)();let t=[];null===e?t.push({id:0,name:"**NOT FOUND**"}):!0===e.response.success&&"length"in e.response.data&&(t=e.response.data);const n=[];n.push(...this._arQuestionType,...t),this._arQuestionType=n}))}createRenderRoot(){return this}};b.styles=[r.css`
   :host { display: block; }
  `],y([(0,i.property)({type:Number}),m("design:type",Number)],b.prototype,"CLIENT_ID",void 0),y([(0,i.property)({type:Array}),m("design:type","function"==typeof(s="undefined"!=typeof Array&&Array)?s:Object)],b.prototype,"_data",void 0),y([(0,i.property)({type:Object}),m("design:type",Object)],b.prototype,"urlQueryParams",void 0),y([(0,i.property)({type:Array}),m("design:type",Array)],b.prototype,"_userLoginInfo",void 0),y([(0,i.property)({type:Number}),m("design:type",Number)],b.prototype,"selectedBranchId",void 0),y([(0,i.property)({type:Array}),m("design:type",Array)],b.prototype,"_branches",void 0),y([(0,i.property)({type:Array}),m("design:type",Array)],b.prototype,"_activeBranchId",void 0),y([(0,i.property)({type:Array}),m("design:type",Array)],b.prototype,"_memberCategories",void 0),y([(0,i.property)({type:Number}),m("design:type",Number)],b.prototype,"userBranch",void 0),y([(0,i.property)({type:Array}),m("design:type","function"==typeof(o="undefined"!=typeof Array&&Array)?o:Object)],b.prototype,"_arQuestionType",void 0),b=y([(0,i.customElement)("additional-registration-creator-form"),m("design:paramtypes",[])],b)},91885:(e,t,n)=>{n.r(t),n.d(t,{QuestionMultipleInputsComponent:()=>c});var s,o=n(85862),r=n(59662),i=(n(43171),n(23283),n(63313),n(51511),function(e,t,n,s){var o,r=arguments.length,i=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,s);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r<3?o(i):r>3?o(t,n,i):o(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i}),a=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};let c=class extends o.LitElement{constructor(){super(),this.currentObjectCount=0,this.multipleQuestionObjects=[],this.removedInputIndex=[],this.addedInputIndex=[],this.loading=!0,this.branches=[],this.memberCategories=[],this._inputs=[],this.arQuestionType=[]}set inputs(e){this._inputs=e,this.requestUpdate()}get inputs(){return this._inputs}connectedCallback(){super.connectedCallback(),console.log({"this.branches":this.branches,"this.memberCategories":this.memberCategories}),setInterval((()=>{this.loading=!1}),1)}disconnectedCallback(){}addInput(e){this.currentObjectCount=this.currentObjectCount+1;let t=o.html`<question-inputs-component question-inputs-component--object="${this.currentObjectCount}" 
      .branches="${this.branches}" .memberCategories="${this.memberCategories}" userBranch="${this.userBranch}" .arQuestionType="${this.arQuestionType}">
    </question-inputs-component>`,n=this.inputs;n.push(t);let s=this.addedInputIndex;s.push(this.currentObjectCount-1),setTimeout((()=>{this.inputs=n,this.addedInputIndex=s,this.multipleInputsHaveChanged(new Event("change"))}),10)}removeInput(e){if(this.currentInputList.length-1>0){let t=this.inputs;this.removedInputIndex.push(e),delete t[e],setTimeout((()=>{this.inputs=t,this.multipleInputsHaveChanged(new Event("change"))}),10)}}get currentInputList(){let e=[];return this.inputs.join("-").split("-").forEach((t=>0==t.length?null:e.push(t))),e}render(){return this.loading?o.html`<div class="flex justify-center">
        <mwc-circular-progress indeterminate></mwc-circular-progress>
      </div>`:o.html`
      <div @change="${this.multipleInputsHaveChanged}">
          ${this.inputs.map(((e,t)=>o.html`
              <div class="border rounded-md mb-1">
                <h3 class="shadow p-3 font-bold">Question ${t+1} Info</h3>
                <!-- ${""} -->
                ${e}
                ${this.currentInputList.length-1>0?o.html`<div class="flex justify-end">
                  <mwc-button @click=${()=>this.removeInput(t)} type="button" class="button danger text-right m-1" raised>Remove</mwc-button>
                  </div>`:o.nothing}
              </div>
            `))}
        <div class="flex justify-end">
          <mwc-button @click=${this.addInput} type="button" class="button warning text-right m-1" raised>Add Question</mwc-button>
        </div>
      </div>
    `}multipleInputsHaveChanged(e){this.addedInputIndex,Array.from(document.querySelectorAll("[question-inputs-component--object]"));const t=[];this.addedInputIndex.forEach((e=>{this.removedInputIndex.includes(e)||t.includes(e)||t.push(e)})),this.multipleQuestionObjects[0]={items:t.map((e=>Array.from(document.querySelectorAll('[question-inputs-component--object="'+(e+1)+'"]')).map((e=>({type:e.typeValue,question:e.questionValue,branchId:e.branchIdValue,memberCategoryId:e.memberCategoryIdValue,placeholderInstruction:e.placeholderInstructionValue})))[0]))}}firstUpdated(){}createRenderRoot(){return this}};c.styles=[o.css`
   :host { display: block; }
  `],i([(0,r.property)({type:Number}),a("design:type",Number)],c.prototype,"meetingEventId",void 0),i([(0,r.property)({type:Number}),a("design:type",Number)],c.prototype,"currentObjectCount",void 0),i([(0,r.property)({type:Array}),a("design:type",Array)],c.prototype,"multipleQuestionObjects",void 0),i([(0,r.property)({type:Array}),a("design:type",Array)],c.prototype,"removedInputIndex",void 0),i([(0,r.property)({type:Array}),a("design:type",Array)],c.prototype,"addedInputIndex",void 0),i([(0,r.property)({type:Boolean}),a("design:type",Boolean)],c.prototype,"loading",void 0),i([(0,r.property)({type:Array}),a("design:type",Array)],c.prototype,"branches",void 0),i([(0,r.property)({type:Number}),a("design:type",Number)],c.prototype,"userBranch",void 0),i([(0,r.property)({type:Array}),a("design:type",Array)],c.prototype,"memberCategories",void 0),i([(0,r.property)({type:Array}),a("design:type","function"==typeof(s="undefined"!=typeof Array&&Array)?s:Object)],c.prototype,"arQuestionType",void 0),c=i([(0,r.customElement)("question-multiple-inputs-component"),a("design:paramtypes",[])],c)}},e=>(e.O(0,["vendors.lit-html","vendors.lit","vendors.lit-element","vendors.buffer","vendors.material","vendors.tslib","vendors.sweetalert2","vendors.jquery","vendors.select2","node_modules_base64-js_index_js-node_modules_ieee754_index_js-src_addons_constants_index_ts-s-981a93","src_addons_classes_network_calls_response_ts","src_addons_widgets_form_new_select_ts","src_assets_styles_views_attendance_setup_form_scss","src_assets_styles_views_tailwind-output_unaccessible_pages_scss-src_assets_styles_views_widge-c8af88","src_assets_styles_views_attendance_setup_form_scss-src_assets_styles_views_widget_simple-tabl-df3ebd","shared"],(()=>(18500,e(e.s=18500)))),e.O())])));
//# sourceMappingURL=form.js.map