"use strict";!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.webpackNumbers=t():e.webpackNumbers=t()}(self,(()=>(self.webpackChunkwebpackNumbers=self.webpackChunkwebpackNumbers||[]).push([["additional-registration/creator/view"],{83136:(e,t,n)=>{n.r(t),n.d(t,{DELETE_AdditionalRegistrationQuestion:()=>u});var o=n(86455),s=n.n(o),i=n(48485),r=n(87270),a=n(14492),c=n(8967),l=n(33600),d=function(e,t,n,o){return new(n||(n=Promise))((function(s,i){function r(e){try{c(o.next(e))}catch(e){i(e)}}function a(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}c((o=o.apply(e,t||[])).next())}))};function u(e){return d(this,void 0,void 0,(function*(){const t=(0,l.getUserLoginInfoCookie)(),n=i.CONSTANTS.URLS.AKWAABA_API_BASE_URL+"members/additonal-registration/questions/"+e,o={};return s().fire({title:"Remove Question?",icon:"info",iconColor:"#f97817",showCancelButton:!0,confirmButtonText:"Yes",cancelButtonText:"Cancel",confirmButtonColor:"#f97817",cancelButtonColor:"#ddd",reverseButtons:!0,showLoaderOnConfirm:!0,backdrop:!0,preConfirm:e=>d(this,void 0,void 0,(function*(){return yield(0,r.http)(n,{method:"DELETE",body:JSON.stringify(o),headers:{Authorization:"Token "+t.token}},!1).then((e=>{try{const t=new a.NetWorkCallResponses("delete",e,!1),n=t.response;if("nameError"in n&&"unknownError"in n&&n.unknownError.length>0){let e=[];n.unknownError.forEach((t=>{t.errors.forEach((t=>{e.push({error:t})}))}));const t=(0,c.https_swal_error_format)(e);s().showValidationMessage(`${t}`)}return t}catch(t){console.error({error:t});let n=e;n.error=t;const o=new a.NetWorkCallResponses("delete",n,!0);return o.postForm,o}})).catch((e=>{s().showValidationMessage(`${String(e)}`)}))})),allowOutsideClick:()=>!s().isLoading()}).then((e=>{if(e.isConfirmed){let t="Success",n=!1;const o=e.value;if(o instanceof Object){const e=o.response;t=String(e.message),n=o.response.success}s().fire({title:t,icon:n?"success":"error",iconColor:"#f97817",confirmButtonColor:"#f97817"}),n&&setTimeout((()=>{window.location.reload()}),500)}}))}))}},77559:(e,t,n)=>{n.r(t),n.d(t,{QuestionEditBtnComponent:()=>l});var o=n(85862),s=n(59662),i=(n(76948),n(23283),n(33590),n(81933),n(67052)),r=n(60424),a=function(e,t,n,o){var s,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(i<3?s(r):i>3?s(t,n,r):s(t,n))||r);return i>3&&r&&Object.defineProperty(t,n,r),r},c=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};let l=class extends o.LitElement{constructor(){super(),this.questionData="{}",this.clientId=0,this.meetingEventId=0,this.arQuestionTypeData="[]"}connectedCallback(){super.connectedCallback()}disconnectedCallback(){}render(){const e=r.Convert.toAdditionalRegistrationModel(String((0,i.base64Decode)(this.questionData))),t=JSON.parse((0,i.base64Decode)(this.arQuestionTypeData));return o.html`
      <div class="whitespace-nowrap px-1">
        <mwc-button class="warning w-full mx-1" icon="edit" @click="${this.showDialog}"
            raised open-dialog-btn="multiple-additional-registration--questions---${e.id}">
        </mwc-button>
        <additional-registration-creator-edit multiple-additional-registration="questions---${e.id}" clientId="${this.clientId}"
          .questionData="${[e]}" .arQuestionTypeData="${t}" meetingEventId="${this.meetingEventId}">
        </additional-registration-creator-edit>
      </div>
    `}firstUpdated(){}showDialog(e){e.preventDefault();const t=e.currentTarget.getAttribute("open-dialog-btn");this.querySelector('[open-this-dialog="'+t+'"]').setAttribute("open","true")}createRenderRoot(){return this}};l.styles=[o.css`
   :host { display: block; }
  `],a([(0,s.property)({type:String}),c("design:type",String)],l.prototype,"questionData",void 0),a([(0,s.property)({type:Number}),c("design:type",Number)],l.prototype,"clientId",void 0),a([(0,s.property)({type:Number}),c("design:type",Number)],l.prototype,"meetingEventId",void 0),a([(0,s.property)({type:String}),c("design:type",String)],l.prototype,"arQuestionTypeData",void 0),l=a([(0,s.customElement)("question-edit-btn-component"),c("design:paramtypes",[])],l)},26664:(e,t,n)=>{n.r(t),n.d(t,{AdditionalRegistrationCreatorView:()=>b}),n(69579),n(43683),n(15474),n(23283),n(66163),n(74657),n(45501);var o,s,i=n(85862),r=n(59662),a=(n(16413),n(51511),n(16883),n(30367),n(44672)),c=(n(75866),n(48485)),l=n(33600),d=n(83136),u=n(71714),p=(n(77559),n(67052)),f=n(60424),m=function(e,t,n,o){var s,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(i<3?s(r):i>3?s(t,n,r):s(t,n))||r);return i>3&&r&&Object.defineProperty(t,n,r),r},_=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},y=function(e,t,n,o){return new(n||(n=Promise))((function(s,i){function r(e){try{c(o.next(e))}catch(e){i(e)}}function a(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}c((o=o.apply(e,t||[])).next())}))};let b=class extends i.LitElement{constructor(){super(),this.CLIENT_ID=0,this._data=[],this._arQuestionType=[],this.urlQueryParams=void 0}connectedCallback(){const e=Object.create(null,{connectedCallback:{get:()=>super.connectedCallback}});return y(this,void 0,void 0,(function*(){e.connectedCallback.call(this),this.urlQueryParams=(0,a.urlQueryParams)(),yield this.getAdditionalRegistrationQuestionType()}))}disconnectedCallback(){}render(){return i.html`<div class="shadow bg-white p-2 my-2">${this.schedule}</div>`}get schedule(){return i.html`${this.table}`}firstUpdated(){}get __tableHeaders(){return[{title:"Question"},{title:"Action"}]}get __tableBody(){return[]}get __tableFoot(){return[{title:"Question"},{title:"Action"}]}get table(){const e=this.__dataTable();let t={};const n=(0,l.getUserLoginInfoCookie)();return t.Authorization="Token "+n.token,i.html`
            <datatables-new .datatable="${e}" .ajaxHeader="${t}"  .dt_body="${this.__tableBody}"
                .dt_foot="${this.__tableFoot}" .dt_head="${this.__tableHeaders}"></datatables-new>
        `}__dataTable(){const e=this;return{order:[[0,"desc"]],processing:!0,serverSide:!0,ajax:{url:c.CONSTANTS.URLS.AKWAABA_API_BASE_URL+"members/additonal-registration/questions/?datatable_plugin",dataSrc:"data",apiType:"akwaabaApp"},columns:[{data:"id",render:(t,n,o)=>e.renderRow1Info(t,n,o),orderable:!0},{data:"clientId",render:(t,n,o)=>e.renderRow2Info(t,n,o),orderable:!0}],columnDefs:[{targets:["_all"],className:"mdc-data-table__cell",checkboxes:{selectRow:!0}}],lengthMenu:[10,25,50,100,500,1e3],drawCallback:function(t){return y(this,void 0,void 0,(function*(){t.aoData,e.removeQuestionBtns()}))},responsive:!0,dom:"Blfrtip",buttons:["selected","selectedSingle","selectAll","selectNone","selectRows","selectColumns","selectCells","pdf","excel","copy","csv"],select:!0}}renderRow1Info(e,t,n){return console.log({"row-row":n}),`\n            <div class="flex align-middle items-center whitespace-nowrap px-1">\n                <b class="text-1xl font-bold">Question:</b> \n                <small class="px-1">${n.question}</small>\n            </div>\n            <div class="flex align-middle items-center whitespace-nowrap px-1">\n                <b class="text-1xl font-bold">Placeholder:</b> \n                <small class="px-1">${n.placeholderInstruction}</small>\n            </div>\n            <div class="flex align-middle items-center whitespace-nowrap px-1">\n                <b class="text-1xl font-bold">Type:</b> \n                <small class="px-1">${n.typeInfo.name}</small>\n            </div>\n        `}renderRow2Info(e,t,n){const o=f.Convert.toAdditionalRegistrationModel(JSON.stringify(n));return console.log({"question-question":o}),`\n          <div class="flex align-middle items-center">\n            <question-edit-btn-component questionData=${(0,p.base64Encode)(JSON.stringify(o))} arQuestionType="${(0,p.base64Encode)(JSON.stringify(this._arQuestionType))}"></question-edit-btn-component>\n            <div><a href="${c.CONSTANTS.URLS.PDB_CLIENT}additional-registration/creator/creator-edit?question=${(0,p.base64Encode)(JSON.stringify(o.id))}" target="_blank"><mwc-button class="ml-1 warning" raised edit-this-item="${o.id}" >\n            <mwc-icon class="mr-1">edit</mwc-icon>\n            </mwc-button></a><mwc-button class="ml-1 danger" raised delete-this-item="${o.id}" >\n            <mwc-icon class="mr-1">delete_forever</mwc-icon>\n            </mwc-button></div>\n          </div>\n        `}removeQuestionBtns(){const e="delete-this-item";document.querySelectorAll("["+e+"]").forEach((t=>{t.addEventListener("click",(n=>{n.preventDefault(),this.removeQuestionAction(t,e,n)}))}))}removeQuestionAction(e,t,n){return y(this,void 0,void 0,(function*(){n.preventDefault();const o=e.getAttribute(t);Number.isNaN(o)||0===Number(o)||(yield(0,d.DELETE_AdditionalRegistrationQuestion)(Number(o)))}))}getAdditionalRegistrationQuestionType(){return y(this,void 0,void 0,(function*(){const e=yield(0,u.GET_AdditionalRegistrationQuestionType)();let t=[];null===e?t.push({id:0,name:"**NOT FOUND**"}):!0===e.response.success&&"length"in e.response.data&&(t=e.response.data);const n=[];n.push(...this._arQuestionType,...t),this._arQuestionType=n}))}createRenderRoot(){return this}};b.styles=[i.css`
   :host { display: block; }
  `],m([(0,r.property)({type:Number}),_("design:type",Number)],b.prototype,"CLIENT_ID",void 0),m([(0,r.property)({type:Array}),_("design:type","function"==typeof(o="undefined"!=typeof Array&&Array)?o:Object)],b.prototype,"_data",void 0),m([(0,r.property)({type:Array}),_("design:type","function"==typeof(s="undefined"!=typeof Array&&Array)?s:Object)],b.prototype,"_arQuestionType",void 0),m([(0,r.property)({type:Object}),_("design:type",Object)],b.prototype,"urlQueryParams",void 0),b=m([(0,r.customElement)("additional-registration-creator-view"),_("design:paramtypes",[])],b)}},e=>(e.O(0,["vendors.lit-html","vendors.lit","vendors.lit-element","vendors.buffer","vendors.material","vendors.tslib","vendors.sweetalert2","vendors.jquery","vendors.select2","vendors.wicg-inert","vendors.blocking-elements","node_modules_base64-js_index_js-node_modules_ieee754_index_js-src_addons_constants_index_ts-s-981a93","src_addons_classes_network_calls_response_ts","src_addons_widgets_form_new_select_ts","src_assets_styles_views_attendance_setup_form_scss","src_assets_styles_views_tailwind-output_unaccessible_pages_scss-src_assets_styles_views_widge-c8af88","src_assets_styles_views_attendance_setup_form_scss-src_assets_styles_views_widget_simple-tabl-df3ebd","src_addons_functions_https_https_swal_error_format_ts-src_addons_interfaces_additional_regist-f2c365","src_view_additional-registration_creator_edit_ts","shared"],(()=>(26664,e(e.s=26664)))),e.O())])));
//# sourceMappingURL=view.js.map