"use strict";(self.webpackChunkwebpackNumbers=self.webpackChunkwebpackNumbers||[]).push([["src_assets_styles_views_admin_user_form_scss-src_view_membership_members_edit_pages_group_sub-a47fc0"],{3753:(e,r,o)=>{o.r(r)},1900:(e,r,o)=>{o.r(r),o.d(r,{POST_GroupingsBulkGroupMember:()=>p});var t=o(6455),n=o.n(t),s=o(8485),u=o(7270),i=o(4492),l=o(8967),c=o(3600),a=function(e,r,o,t){return new(o||(o=Promise))((function(n,s){function u(e){try{l(t.next(e))}catch(e){s(e)}}function i(e){try{l(t.throw(e))}catch(e){s(e)}}function l(e){var r;e.done?n(e.value):(r=e.value,r instanceof o?r:new o((function(e){e(r)}))).then(u,i)}l((t=t.apply(e,r||[])).next())}))};function p(){return a(this,void 0,void 0,(function*(){const e=(0,c.getUserLoginInfoCookie)(),r=s.CONSTANTS.URLS.AKWAABA_API_BASE_URL+"members/groupings/group-member/bulk",o=document.querySelector('[make-general-posts="members-groupings-group-member-bulk"]'),t=new FormData(o);return n().fire({title:"Update Account Group(s)?",icon:"info",iconColor:"#f97817",showCancelButton:!0,confirmButtonText:"Yes",cancelButtonText:"Cancel",confirmButtonColor:"#f97817",cancelButtonColor:"#ddd",reverseButtons:!0,showLoaderOnConfirm:!0,backdrop:!0,preConfirm:s=>a(this,void 0,void 0,(function*(){return yield(0,u.http)(r,{method:"POST",body:t,headers:{Authorization:"Token "+e.token}},!1).then((e=>{const r=new i.NetWorkCallResponses("post",e,!1,o),t=r.response;if("nameError"in t&&"unknownError"in t&&t.unknownError.length>0){let e=[];t.unknownError.forEach((r=>{r.errors.forEach((o=>{let t={error:r.id+": "+o};"non_field_errors"===r.id&&(t={error:o}),e.push(t)}))}));const r=(0,l.https_swal_error_format)(e);n().showValidationMessage(`${r}`)}return r})).catch((e=>{n().showValidationMessage(`${String(e)}`)}))})),allowOutsideClick:()=>!n().isLoading()}).then((e=>{if(e.isConfirmed){let r="Success",o=!1;const t=e.value;if(t instanceof Object){const e=t.response;r=String(e.message),o=t.response.success}o&&n().fire({title:r,icon:o?"success":"error",iconColor:o?"#f97817":"#dc2626",confirmButtonColor:"#f97817"}),o&&setTimeout((()=>{window.location.reload()}),500)}}))}))}},2892:(e,r,o)=>{o.r(r),o.d(r,{GET_MemberGroupingsGroups:()=>i});var t=o(8485),n=o(7270),s=o(4492),u=o(3600);function i(e=null,r=""){return o=this,i=void 0,c=function*(){const o=(0,u.getUserLoginInfoCookie)(),i=t.CONSTANTS.URLS.AKWAABA_API_BASE_URL+"members/groupings/group"+(null===e?"":"/"+e)+r,l=yield(0,n.http)(i,{method:"GET",headers:{Authorization:"Token "+o.token}},!0);try{return new s.NetWorkCallResponses("get",l)}catch(e){console.error({error:e});let r=l;return r.error=e,new s.NetWorkCallResponses("get",r,!0)}},new((l=void 0)||(l=Promise))((function(e,r){function t(e){try{s(c.next(e))}catch(e){r(e)}}function n(e){try{s(c.throw(e))}catch(e){r(e)}}function s(r){var o;r.done?e(r.value):(o=r.value,o instanceof l?o:new l((function(e){e(o)}))).then(t,n)}s((c=c.apply(o,i||[])).next())}));var o,i,l,c}},9605:(e,r,o)=>{o.r(r),o.d(r,{GET_MemberGroupingsSubGroups:()=>i});var t=o(8485),n=o(7270),s=o(4492),u=o(3600);function i(e=null,r=""){return o=this,i=void 0,c=function*(){const o=(0,u.getUserLoginInfoCookie)(),i=t.CONSTANTS.URLS.AKWAABA_API_BASE_URL+"members/groupings/sub-group"+(null===e?"":"/"+e)+r,l=yield(0,n.http)(i,{method:"GET",headers:{Authorization:"Token "+o.token}},!0);try{return new s.NetWorkCallResponses("get",l)}catch(e){console.error({error:e});let r=l;return r.error=e,new s.NetWorkCallResponses("get",r,!0)}},new((l=void 0)||(l=Promise))((function(e,r){function t(e){try{s(c.next(e))}catch(e){r(e)}}function n(e){try{s(c.throw(e))}catch(e){r(e)}}function s(r){var o;r.done?e(r.value):(o=r.value,o instanceof l?o:new l((function(e){e(o)}))).then(t,n)}s((c=c.apply(o,i||[])).next())}));var o,i,l,c}},413:(e,r,o)=>{o.r(r),o.d(r,{POST_GroupingsBulkSubgroupMember:()=>p});var t=o(6455),n=o.n(t),s=o(8485),u=o(7270),i=o(4492),l=o(8967),c=o(3600),a=function(e,r,o,t){return new(o||(o=Promise))((function(n,s){function u(e){try{l(t.next(e))}catch(e){s(e)}}function i(e){try{l(t.throw(e))}catch(e){s(e)}}function l(e){var r;e.done?n(e.value):(r=e.value,r instanceof o?r:new o((function(e){e(r)}))).then(u,i)}l((t=t.apply(e,r||[])).next())}))};function p(){return a(this,void 0,void 0,(function*(){const e=(0,c.getUserLoginInfoCookie)(),r=s.CONSTANTS.URLS.AKWAABA_API_BASE_URL+"members/groupings/sub-group-member/bulk",o=document.querySelector('[make-general-posts="members-groupings-subgroup-member-bulk"]'),t=new FormData(o);return n().fire({title:"Update Account Sub-Group(s)?",icon:"info",iconColor:"#f97817",showCancelButton:!0,confirmButtonText:"Yes",cancelButtonText:"Cancel",confirmButtonColor:"#f97817",cancelButtonColor:"#ddd",reverseButtons:!0,showLoaderOnConfirm:!0,backdrop:!0,preConfirm:s=>a(this,void 0,void 0,(function*(){return yield(0,u.http)(r,{method:"POST",body:t,headers:{Authorization:"Token "+e.token}},!1).then((e=>{const r=new i.NetWorkCallResponses("post",e,!1,o),t=r.response;if("nameError"in t&&"unknownError"in t&&t.unknownError.length>0){let e=[];t.unknownError.forEach((r=>{r.errors.forEach((o=>{let t={error:r.id+": "+o};"non_field_errors"===r.id&&(t={error:o}),e.push(t)}))}));const r=(0,l.https_swal_error_format)(e);n().showValidationMessage(`${r}`)}return r})).catch((e=>{n().showValidationMessage(`${String(e)}`)}))})),allowOutsideClick:()=>!n().isLoading()}).then((e=>{if(e.isConfirmed){let r="Success",o=!1;const t=e.value;if(t instanceof Object){const e=t.response;r=String(e.message),o=t.response.success}o&&n().fire({title:r,icon:o?"success":"error",iconColor:o?"#f97817":"#dc2626",confirmButtonColor:"#f97817"}),o&&setTimeout((()=>{window.location.reload()}),500)}}))}))}},9697:(e,r,o)=>{o.r(r),o.d(r,{PdbMembershipUpdateViewGroupSubgroup:()=>y}),o(3283),o(5866);var t=o(428),n=o(7659),s=o(1594),u=o(1848),i=o(2892),l=o(8058),c=o(1900),a=o(9605),p=o(2413),d=o(413),m=o(5862),g=o(9662),b=function(e,r,o,t){var n,s=arguments.length,u=s<3?r:null===t?t=Object.getOwnPropertyDescriptor(r,o):t;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)u=Reflect.decorate(e,r,o,t);else for(var i=e.length-1;i>=0;i--)(n=e[i])&&(u=(s<3?n(u):s>3?n(r,o,u):n(r,o))||u);return s>3&&u&&Object.defineProperty(r,o,u),u},f=function(e,r){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,r)},h=function(e,r,o,t){return new(o||(o=Promise))((function(n,s){function u(e){try{l(t.next(e))}catch(e){s(e)}}function i(e){try{l(t.throw(e))}catch(e){s(e)}}function l(e){var r;e.done?n(e.value):(r=e.value,r instanceof o?r:new o((function(e){e(r)}))).then(u,i)}l((t=t.apply(e,r||[])).next())}))};let y=class extends m.LitElement{constructor(){super(),this._groups=[],this._subgroups=[],this.memberGroups=null,this.memberSubGroups=null}connectedCallback(){const e=Object.create(null,{connectedCallback:{get:()=>super.connectedCallback}});return h(this,void 0,void 0,(function*(){e.connectedCallback.call(this),yield this.getGroups(),yield this.getSubGroups(),yield this.getMemberGroups(),yield this.getMemberSubgroups()}))}disconnectedCallback(){}render(){const e=this.groupsSubgroups,r=e.groups,o=e.subgroups;return m.html`
      <form method="post" action="#" class="form !my-1" make-general-posts="--awaiting-type--"
        enctype="multipart/form-data">
        <div
          class="flex rounded-lg border border-gray-200 bg-white shadow-md dark:border-gray-700 dark:bg-gray-800 flex-col px-2 mt-1 mb-2">
          <div class="grid grid-cols-1 md:grid-cols-1 lg:grid-cols-2 grid-flow-row gap-4">
            <div class="p-2">
              <h4 class="font-semibold my-2">Select Account Group(s)</h4>
              <select-input name="groups" multiple class="w-full" id="groups" label="Select Account Group(s)"
                .options="${r}" outlined required>
              </select-input>
            </div>
            <div class="p-2">
              <h4 class="font-semibold my-2">Select Account Sub-Group(s)</h4>
              <select-input name="subgroups" multiple class="w-full" id="subgroups" label="Select Account Sub-Group(s)"
                .options="${o}" outlined required>
              </select-input>
            </div>
            <input type="hidden" name="memberId" id="memberId" value="${this.memberId}" />
          </div>
        </div>
        <div
          class="flex rounded-lg border border-gray-200 bg-white shadow-md dark:border-gray-700 dark:bg-gray-800 flex-row my-2 p-1 justify-evenly content-evenly">
          <div class="flex justify-end ">
            <mwc-button class="primary" raised type="submit" label="Update Group(s)" message="Update Group(s)"
              @click="${this.submitGroupsForm}">
            </mwc-button>
          </div>
          <div class="flex justify-end ">
            <mwc-button class="info" raised type="submit" label="Update Sub-Group(s)" message="Update Sub-Group(s)"
              @click="${this.submitSubGroupsForm}">
            </mwc-button>
          </div>
        </div>
      </form>
    `}get groupsSubgroups(){let e=[],r=[];return this._groups.forEach((r=>{var o;let t=!1,n="false";null===(o=this.memberGroups)||void 0===o||o.forEach((e=>{e.groupId.id===r.id&&(t=!0,n="true")}));const s={id:r.id,name:r.group,isSelected:n,selected:t};e.includes(s)||e.push(s)})),this._subgroups.forEach((e=>{var o;let t=!1,n="false";null===(o=this.memberSubGroups)||void 0===o||o.forEach((r=>{r.subgroupId.id===e.id&&(t=!0,n="true")}));const s={id:e.id,name:`${e.groupID.group} => ${e.subgroup}`,isSelected:n,selected:t};r.includes(s)||r.push(s)})),{groups:e,subgroups:r}}firstUpdated(){}getGroups(){return h(this,void 0,void 0,(function*(){const e=yield(0,i.GET_MemberGroupingsGroups)();let r=[];null===e?r.push({id:0,group:"**NOT FOUND**",date:new Date}):!0===e.response.success&&"length"in e.response.data&&(r=e.response.data.map((e=>t.Convert.toGroupModel(JSON.stringify(e)))));const o=[];o.push(...this._groups,...r),this._groups=o}))}getSubGroups(){return h(this,void 0,void 0,(function*(){const e=yield(0,a.GET_MemberGroupingsSubGroups)();let r=[];null===e?r.push({id:0,subgroup:"**NOT FOUND**",date:new Date}):!0===e.response.success&&"length"in e.response.data&&(r=e.response.data.map((e=>s.Convert.toSubGroupModel(JSON.stringify(e)))));const o=[];o.push(...this._subgroups,...r),this._subgroups=o}))}getMemberGroups(){return h(this,void 0,void 0,(function*(){const e=yield(0,l.GET_GroupingsGroupMembers)(null,"?memberId="+this.memberId);if(null===e)this.memberGroups=[];else{const r=Array.isArray(e.paginResponse.results)?e.paginResponse.results:[e.paginResponse.results];this.memberGroups=r.map((e=>n.Convert.toGroupMemberModel(JSON.stringify(e))))}}))}getMemberSubgroups(){return h(this,void 0,void 0,(function*(){const e=yield(0,p.GET_GroupingsSubGroupMembers)(null,"?memberId="+this.memberId);if(null===e)this.memberSubGroups=[];else{const r=Array.isArray(e.paginResponse.results)?e.paginResponse.results:[e.paginResponse.results];this.memberSubGroups=r.map((e=>u.Convert.toSubGroupMemberModel(JSON.stringify(e))))}}))}submitGroupsForm(e){return h(this,void 0,void 0,(function*(){const e=this.handleMultitpleSubmitFormSelectors();e.handle("group"),yield(0,c.POST_GroupingsBulkGroupMember)(),e.reset("group")}))}submitSubGroupsForm(e){return h(this,void 0,void 0,(function*(){const e=this.handleMultitpleSubmitFormSelectors();e.handle("subgroup"),yield(0,d.POST_GroupingsBulkSubgroupMember)(),e.reset("subgroup")}))}handleMultitpleSubmitFormSelectors(){return{handle:e=>{document.querySelectorAll('[make-general-posts="--awaiting-type--"]').forEach((r=>{r.hasAttribute("make-general-posts")&&r.setAttribute("make-general-posts",`members-groupings-${e}-member-bulk`)}))},reset:e=>{document.querySelectorAll(`[make-general-posts="members-groupings-${e}-member-bulk"]`).forEach((e=>{e.setAttribute("make-general-posts","--awaiting-type--")}))}}}createRenderRoot(){return this}};y.styles=[m.css`
   :host { display: block; }
  `],b([(0,g.property)({type:Number}),f("design:type",Number)],y.prototype,"memberId",void 0),b([(0,g.property)({type:Array}),f("design:type",Array)],y.prototype,"_groups",void 0),b([(0,g.property)({type:Array}),f("design:type",Array)],y.prototype,"_subgroups",void 0),b([(0,g.property)({type:Array}),f("design:type",Array)],y.prototype,"memberGroups",void 0),b([(0,g.property)({type:Array}),f("design:type",Array)],y.prototype,"memberSubGroups",void 0),y=b([(0,g.customElement)("pdb-membership-update-view-group-subgroup"),f("design:paramtypes",[])],y)}}]);
//# sourceMappingURL=src_assets_styles_views_admin_user_form_scss-src_view_membership_members_edit_pages_group_sub-a47fc0.js.map