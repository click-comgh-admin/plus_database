"use strict";!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.webpackNumbers=n():e.webpackNumbers=n()}(self,(()=>(self.webpackChunkwebpackNumbers=self.webpackChunkwebpackNumbers||[]).push([[3708],{9194:(e,n,t)=>{function o(e){return{id:Number(e.id),type:String(e.type),clientId:Number(e.clientId),description:String(e.description),createdBy:Number(e.createdBy),creationDate:new Date(e.creationDate),lastUpdatedBy:Number(e.lastUpdatedBy),lastUpdateDate:new Date(e.lastUpdateDate)}}t.d(n,{m:()=>o})},2949:(e,n,t)=>{t.r(n),t.d(n,{PdbConnectionsUnassignedConnections:()=>E});var o=t(9392),r=t(1936),c=(t(2351),t(3683),t(4657),t(9665)),i=t(2145),s=t(1302),a=t(5943),l=(t(1239),t(934),t(8879)),d=t(3114),u=t(9194),f=t(771),p=t(3600),m=t(4672),h=(t(6883),t(9261),t(5866),t(6455)),b=t.n(h),v=t(7270),g=t(596),y=t(8967),w=function(e,n,t,o){return new(t||(t=Promise))((function(r,c){function i(e){try{a(o.next(e))}catch(e){c(e)}}function s(e){try{a(o.throw(e))}catch(e){c(e)}}function a(e){var n;e.done?r(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(i,s)}a((o=o.apply(e,n||[])).next())}))};function _(e){return w(this,void 0,void 0,(function*(){const n=(0,p.Ie)(),t=f.t.URLS.AKWAABA_API_BASE_URL+"members/user-connection-account/approve-connection",o={connectionIds:e};return b().fire({title:"Approve Connection?",icon:"info",iconColor:"#f97817",showCancelButton:!0,confirmButtonText:"Yes",cancelButtonText:"Cancel",confirmButtonColor:"#f97817",cancelButtonColor:"#ddd",reverseButtons:!0,showLoaderOnConfirm:!0,backdrop:!0,preConfirm:e=>w(this,void 0,void 0,(function*(){return yield(0,v.d)(t,{method:"POST",body:JSON.stringify(o),headers:{Authorization:"Token "+n.token}},!0,!1).then((e=>{try{const n=new g.H("post",e,!1),t=n.response;if("nameError"in t&&"unknownError"in t&&t.unknownError.length>0){let e=[];t.unknownError.forEach((n=>{n.errors.forEach((n=>{e.push({error:n})}))}));const n=(0,y.T)(e);b().showValidationMessage(`${n}`)}return n}catch(n){console.error({error:n});let t=e;t.error=n;const o=new g.H("post",t,!0);return o.postForm,o}})).catch((e=>{b().showValidationMessage(`${String(e)}`)}))})),allowOutsideClick:()=>!b().isLoading()}).then((e=>{if(e.isConfirmed){let n="Success",t=!1;const o=e.value;if(o instanceof Object){const e=o.response;n=String(e.message),t=o.response.success}b().fire({title:n,icon:t?"success":"error",iconColor:"#f97817",confirmButtonColor:"#f97817"}),t&&setTimeout((()=>{window.location.reload()}),500)}}))}))}var C=function(e,n,t,o){return new(t||(t=Promise))((function(r,c){function i(e){try{a(o.next(e))}catch(e){c(e)}}function s(e){try{a(o.throw(e))}catch(e){c(e)}}function a(e){var n;e.done?r(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(i,s)}a((o=o.apply(e,n||[])).next())}))};function x(e){return C(this,void 0,void 0,(function*(){const n=(0,p.Ie)(),t=f.t.URLS.AKWAABA_API_BASE_URL+"members/user-connection-account/reject-connection",o={connectionIds:e};return b().fire({title:"Reject Connection(s)?",icon:"info",iconColor:"#f97817",showCancelButton:!0,confirmButtonText:"Yes",cancelButtonText:"Cancel",confirmButtonColor:"#f97817",cancelButtonColor:"#ddd",reverseButtons:!0,showLoaderOnConfirm:!0,backdrop:!0,preConfirm:e=>C(this,void 0,void 0,(function*(){return yield(0,v.d)(t,{method:"POST",body:JSON.stringify(o),headers:{Authorization:"Token "+n.token}},!0,!1).then((e=>{try{const n=new g.H("post",e,!1),t=n.response;if("nameError"in t&&"unknownError"in t&&t.unknownError.length>0){let e=[];t.unknownError.forEach((n=>{n.errors.forEach((n=>{e.push({error:n})}))}));const n=(0,y.T)(e);b().showValidationMessage(`${n}`)}return n}catch(n){console.error({error:n});let t=e;t.error=n;const o=new g.H("post",t,!0);return o.postForm,o}})).catch((e=>{b().showValidationMessage(`${String(e)}`)}))})),allowOutsideClick:()=>!b().isLoading()}).then((e=>{if(e.isConfirmed){let n="Success",t=!1;const o=e.value;if(o instanceof Object){const e=o.response;n=String(e.message),t=o.response.success}b().fire({title:n,icon:t?"success":"error",iconColor:"#f97817",confirmButtonColor:"#f97817"}),t&&setTimeout((()=>{window.location.reload()}),500)}}))}))}var k=function(e,n,t,o){var r,c=arguments.length,i=c<3?n:null===o?o=Object.getOwnPropertyDescriptor(n,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,n,t,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(c<3?r(i):c>3?r(n,t,i):r(n,t))||i);return c>3&&i&&Object.defineProperty(n,t,i),i},A=function(e,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,n)},S=function(e,n,t,o){return new(t||(t=Promise))((function(r,c){function i(e){try{a(o.next(e))}catch(e){c(e)}}function s(e){try{a(o.throw(e))}catch(e){c(e)}}function a(e){var n;e.done?r(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(i,s)}a((o=o.apply(e,n||[])).next())}))};let j=class extends o.oi{constructor(){super(),this._connection_accounts=[],this.datatablePathUrl="members/user-connection-account/unassigned"}connectedCallback(){const e=Object.create(null,{connectedCallback:{get:()=>super.connectedCallback}});return S(this,void 0,void 0,(function*(){e.connectedCallback.call(this)}))}disconnectedCallback(){}render(){return null===this._connection_accounts?o.dy`
        <div class="main-container">
          <div class="flex justify-center">
            <mwc-circular-progress indeterminate></mwc-circular-progress>
          </div>
        </div>
      `:void 0===this._connection_accounts?o.dy`
        <div class="main-container">
          <div class="flex justify-center">
            <h4 class="text-red-600 text-lg">
              <span class="font-bold">Schedule </span>: undefined error</h4>
          </div>
        </div>
      `:o.dy`
      <span class="flex flex-row md:flex-col w-100"></span>
      <div class="block my-1 overflow-x-scroll">
        <hr class="my-2" />
        ${this.table_header}
        ${this.table}
      </div>
    `}firstUpdated(){}get table_header(){return o.dy`
      <div class="flex-col p-2 mb-2 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 grid-flow-row gap-4 pb-5">
        <div
          class="rounded-lg border border-gray-200 bg-white shadow-md dark:border-gray-700 dark:bg-gray-800 flex-col p-2 border-b-2 mb-2">
          <label class="flex justify-between items-center">
            <b>CHECK ALL: </b>
            <input id="unassigned_info_all" name="unassigned_info_all" type="checkbox"
              class="rounded border-gray-300 text-indigo-600 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50"
              @change="${this.check_all_unassigned}" />
          </label>
        </div>
        <div
          class="rounded-lg border border-gray-200 bg-white shadow-md dark:border-gray-700 dark:bg-gray-800 flex-col p-2 border-b-2 mb-2">
          <mwc-button class="success" raised @click="${this.approveMultipleConnections}">
            Approve All Selected</mwc-button>
        </div>
        <div
          class="rounded-lg border border-gray-200 bg-white shadow-md dark:border-gray-700 dark:bg-gray-800 flex-col p-2 border-b-2 mb-2">
          <mwc-button class="warning" raised @click="${this.rejectMultipleConnections}">Reject All Selected</mwc-button>
        </div>
      </div>
    `}get __tableHeaders(){return[{title:"Connection"},{title:"Action"}]}get __tableBody(){return[]}get __tableFoot(){return[{title:"Connection"},{title:"Action"}]}get table(){let e=f.t.URLS.AKWAABA_API_BASE_URL+""+this.datatablePathUrl+"?datatable_plugin";e+=this.urlQueryString;const n=this.__dataTable(e);let t={};const r=(0,p.Ie)();return t.Authorization="Token "+r.token,o.dy`
      <datatables-new .datatable="${n}" .ajaxHeader="${t}" .dt_body="${this.__tableBody}"
        .dt_foot="${this.__tableFoot}" .dt_head="${this.__tableHeaders}"></datatables-new>
    `}renderMemberInfo(e,n,t){t=function(e){return{id:Number(e.id),type:(0,u.m)(e.type),memberId:(0,d.Z)(e.memberId),memberAccountType:Number(e.memberAccountType),connectionId:(0,d.Z)(e.connectionId),connectionAccountType:Number(e.connectionAccountType),createdBy:Number(e.createdBy),creationDate:new Date(e.creationDate)}}(t);const o=t.id,r=t.memberId,c=t.connectionId;return`\n      <div class="flex mb-0">\n        <input id="unassigned_info" name="unassigned_info" type="checkbox" value="${o}"\n          class="rounded border-gray-300 text-indigo-600 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50" />\n        <div class="flex flex-col">\n          <div class="flex flex-col lg:flex-row m-1 justify-start">\n            <div class="flex">\n              <h6 class="whitespace-nowrap text-sm font-bold mr-1">Connection Name</h6>\n              <p class="whitespace-nowrap text-sm ml-1">${c.firstname} ${c.middlename}\n                ${c.surname}</p>\n            </div>\n            <div class="m-1"><mwc-icon>directions<mwc-icon/></div>\n            <div class="flex">\n              <h6 class="whitespace-nowrap text-sm font-bold mr-1">Member Name</h6>\n              <p class="whitespace-nowrap text-sm ml-1">${r.firstname} ${r.middlename} ${r.surname}</p>\n            </div>\n          </div>\n        </div>\n      </div>\n    `}renderClockInInfo(e,n,t){const o=t.type;return`\n      <div class="justify-center content-center">\n        <div class="flex">\n          <mwc-icon-button class="ml-1 success" icon="check" \n            approve-this-item="${t.id}" >\n          </mwc-icon-button>\n          <mwc-icon-button class="ml-1 warning" icon="cancel" \n            reject-this-item="${t.id}" >\n          </mwc-icon-button>\n          <mwc-icon-button class="ml-1 danger" icon="delete_forever" \n            delete-this-item="${t.id}" >\n          </mwc-icon-button>\n        </div>\n        <div class="flex flex-col">\n          <h6 class="whitespace-nowrap text-sm font-bold mr-1">Connection Type:</h6>\n          <div class="flex flex-col">\n            <p class="whitespace-nowrap text-sm ml-1">${o.type}</p>\n            <p class="text-xs ml-1 whitespace-pre-wrap">${o.description}</p>\n          </div>\n        </div>\n      </div>\n    `}get urlQueryString(){const e=(0,m.O1)();let n={};for(const t in e){let o=String(e[t]);"memberId"===t&&(n[t]=o)}let t=(0,m.W3)(n);return 0===t.length?t:"&"+t}__dataTable(e){const n=this;return{order:[[0,"desc"]],processing:!0,serverSide:!0,ajax:{url:e,dataSrc:"data",apiType:"akwaabaApp"},columns:[{data:"id",render:(e,t,o)=>n.renderMemberInfo(e,t,o),orderable:!0},{data:"inTime",render:(e,t,o)=>n.renderClockInInfo(e,t,o),orderable:!0}],columnDefs:[{targets:["_all"],className:"mdc-data-table__cell",checkboxes:{selectRow:!0}}],lengthMenu:[10,25,50,100,500,1e3],drawCallback:function(e){return S(this,void 0,void 0,(function*(){e.aoData,n.deleteConnectionAction(),n.approveConnectionAction(),n.rejectConnectionAction()}))},responsive:!1,dom:"Blfrtip",buttons:["selected","selectedSingle","selectAll","selectNone","selectRows","selectColumns","selectCells","pdf","excel","copy","csv"],select:!0}}check_all_unassigned(e){return S(this,void 0,void 0,(function*(){e.preventDefault(),document.querySelectorAll('[id="unassigned_info_all"][name="unassigned_info_all"]').forEach((e=>{e.checked?document.querySelectorAll('[id="unassigned_info"][name="unassigned_info"]').forEach((e=>{e.checked=!0})):document.querySelectorAll('[id="unassigned_info"][name="unassigned_info"]').forEach((e=>{e.checked=!1}))}))}))}deleteConnectionAction(){document.querySelectorAll("[delete-this-item]").forEach((e=>{e.addEventListener("click",(e=>{this.deleteConnection(e)}))}))}deleteConnection(e){return S(this,void 0,void 0,(function*(){e.preventDefault();const n=Number(e.currentTarget.getAttribute("delete-this-item"));yield(0,l.y)(n)}))}approveConnectionAction(){document.querySelectorAll("[approve-this-item]").forEach((e=>{e.addEventListener("click",(e=>{this.approveConnection(e)}))}))}approveConnection(e){return S(this,void 0,void 0,(function*(){e.preventDefault();const n=Number(e.currentTarget.getAttribute("approve-this-item"));yield _([n])}))}rejectConnectionAction(){document.querySelectorAll("[reject-this-item]").forEach((e=>{e.addEventListener("click",(e=>{this.rejectConnection(e)}))}))}rejectConnection(e){return S(this,void 0,void 0,(function*(){e.preventDefault();const n=Number(e.currentTarget.getAttribute("reject-this-item"));yield x([n])}))}approveMultipleConnections(e){return S(this,void 0,void 0,(function*(){e.preventDefault();let n=[];document.querySelectorAll('[id="unassigned_info"][name="unassigned_info"]').forEach((e=>{if(e.checked&&!Number.isNaN(e.value)){const t=Number(e.value);n.includes(t)||n.push(t)}})),yield _(n)}))}rejectMultipleConnections(e){return S(this,void 0,void 0,(function*(){e.preventDefault();let n=[];document.querySelectorAll('[id="unassigned_info"][name="unassigned_info"]').forEach((e=>{if(e.checked&&!Number.isNaN(e.value)){const t=Number(e.value);n.includes(t)||n.push(t)}})),yield x(n)}))}createRenderRoot(){return this}};j.styles=[o.iv`
   :host { display: block; }
  `],k([(0,r.Cb)({type:Array}),A("design:type",Array)],j.prototype,"_connection_accounts",void 0),k([(0,r.Cb)({type:String}),A("design:type",String)],j.prototype,"datatablePathUrl",void 0),j=k([(0,r.Mo)("pdb-connections-unassigned-view"),A("design:paramtypes",[])],j);var B=function(e,n,t,o){var r,c=arguments.length,i=c<3?n:null===o?o=Object.getOwnPropertyDescriptor(n,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,n,t,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(c<3?r(i):c>3?r(n,t,i):r(n,t))||i);return c>3&&i&&Object.defineProperty(n,t,i),i},N=function(e,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,n)};let E=class extends o.oi{constructor(){super(),this._hasSetup=!1}connectedCallback(){super.connectedCallback(),(0,c.f)().then((()=>this._hasSetup=!0))}disconnectedCallback(){}render(){var e;if(this._hasSetup){if(null===(e=(0,i.H)())||void 0===e?void 0:e.expiration_date.expired)return o.dy`<account-expired-component></account-expired-component>`;if(!(0,s.H)({pageId:a.W.user_connections,viewType:"View"},!1))return o.dy`<no-page-entry-component></no-page-entry-component>`}return o.dy`
      <div class="flex flex-col shadow bg-white my-2 p-2">
        <pdb-connections-unassigned-view class="my-1"></pdb-connections-unassigned-view>
      </div>
    `}firstUpdated(){}createRenderRoot(){return this}};E.styles=[o.iv`
   :host { display: block; }
  `],B([(0,r.Cb)({type:Boolean}),N("design:type",Boolean)],E.prototype,"_hasSetup",void 0),E=B([(0,r.Mo)("pdb-connections-unassigned-connections"),N("design:paramtypes",[])],E)}},e=>(e.O(0,[2185,5744,9674,8820,1828,316,836,5291,6236,6069,6553,1454,7147,3712],(()=>(2949,e(e.s=2949)))),e.O())])));
//# sourceMappingURL=unassigned.js.map